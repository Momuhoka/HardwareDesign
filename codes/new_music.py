# 简谱到MIDI音高值的映射
midi_map = {
    '1': 69, '2': 71, '3': 73, '4': 74, '5': 76, '6': 78, '7': 80,
    '1.': 57, '2.': 59, '3.': 61, '4.': 62, '5.': 64, '6.': 66, '7.': 68,
    '1^': 81, '2^': 83, '3^': 85, '4^': 86, '5^': 88, '6^': 90, '7^': 92,
    '0': 0  # 休止符
}

jianpu_str = """116561123022122553323011655323210221223216210116561123022122553323022581211165532322212236235555653210616532162233235555653210616523116116533211161221116116212355116116116116161210100010006165231000"""

# 简谱字符串（提取自图像）
#jianpu_str = """0, 2, 1, 6, 1, 1, 6, 1, 6, 1, 2, 1, 1, 0, 5, 6, 3, 1, 1, 1, 0, 5, 6, 3, 3, 2, 3, 3, 0, 3, 3, 3, 2, 2, 2, 0, 2, 1, 6, 1, 6, 5, 6, 5, 0, 2, 1, 6, 3, 3, 2, 3, 0, 3, 3, 2, 2, 2, 2, 3, 3, 2, 0, 2, 1, 6, 5, 0, 2, 1, 2, 1, 6, 5, 5, 0, 2, 1, 2, 1, 6, 5, 5, 0, 2, 1, 2, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2, 1, 1, 1, 6, 5, 5, 0, 2, 1, 2"""

# 将简谱字符串转换为MIDI音高值
midi_values = f"#File_format=Hex\n#Address_depth=4096\n#Data_width=8\n"
for char in jianpu_str:
    if char in midi_map:
        midi_value = midi_map[char]
        midi_values = midi_values+f"{midi_value:02X}"+'\n'
        
for i in range(4096-len(jianpu_str)):
    midi_values = midi_values+f"FF"+'\n'

with open('htys.mi', 'w') as f:
    f.write(midi_values)

